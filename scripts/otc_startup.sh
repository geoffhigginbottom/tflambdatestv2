#! /bin/bash
# Version 2.0

TOKEN=$1
BALLAST=$2
REALM=$3
SPLUNK_CONFIG=$4
OTELCOL_VERSION=$5

docker stop otelcol

docker run -d --rm -e SPLUNK_ACCESS_TOKEN=$TOKEN -e SPLUNK_BALLAST_SIZE_MIB=$BALLAST -e SPLUNK_REALM=$REALM -v SPLUNK_CONFIG=$SPLUNK_CONFIG  -p 13133:13133 -p 14250:14250 -p 14268:14268 -p 55678-55680:55678-55680 -p 6060:6060 -p 7276:7276 -p 8888:8888 -p 9411:9411 -p 9943:9943 --name otelcol quay.io/signalfx/splunk-otel-collector:$OTELCOL_VERSION
